
# Copyright (c) 2012-2014 Stefan Eilemann <eile@eyescale.ch>

include(files.cmake)

list(APPEND LUNCHBOX_LINK_LIBRARIES PUBLIC ${Boost_LIBRARIES})

if(LUNCHBOX_BUILD_V2_API)
  list(APPEND LUNCHBOX_LINK_LIBRARIES PRIVATE Servus ${PTHREAD_LIBRARIES})
else()
  list(APPEND LUNCHBOX_LINK_LIBRARIES Servus PRIVATE ${PTHREAD_LIBRARIES})
endif()

if(WIN32)
  list(APPEND LUNCHBOX_LINK_LIBRARIES ws2_32 mswsock imagehlp)
endif(WIN32)
if(LINUX)
  list(APPEND LUNCHBOX_LINK_LIBRARIES dl rt)
endif()
if(HWLOC_FOUND)
  list(APPEND LUNCHBOX_LINK_LIBRARIES ${hwloc_LIBRARIES})
endif()
if(DNSSD_FOUND)
  list(APPEND LUNCHBOX_LINK_LIBRARIES ${DNSSD_LIBRARIES})
endif()
if(AVAHI-CLIENT_FOUND)
  list(APPEND LUNCHBOX_LINK_LIBRARIES ${avahi-client_LIBRARIES})
endif()
if(MPI_FOUND)
  list(APPEND LUNCHBOX_LINK_LIBRARIES ${MPI_LIBRARIES})
endif()
if(LEVELDB_FOUND)
  list(APPEND LUNCHBOX_LINK_LIBRARIES ${LEVELDB_LIBRARIES})
endif()
if(SKV_FOUND)
  list(APPEND LUNCHBOX_LINK_LIBRARIES ${SKV_CLIENT_LIBRARY}
    ${SKV_COMMON_LIBRARY} ${IT_API_LIBRARY} ${FXLOGGER_LIBRARY})
  if(SKV_OFED_FOUND)
    list(APPEND LUNCHBOX_LINK_LIBRARIES ${SKV_OFED_LIBRARIES}
      ${PTHREAD_LIBRARIES})
  endif()
endif()

common_library(Lunchbox)

source_group(\\ FILES CMakeLists.txt)
source_group(lunchbox FILES ${LUNCHBOX_PUBLIC_HEADERS} ${LUNCHBOX_HEADERS}
  ${LUNCHBOX_SOURCES})
